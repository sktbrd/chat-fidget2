"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("fetch-retry"),e=require("@privy-io/public-api"),t=require("../../Error.js"),a=require("../../funding/moonpay.js");function i(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}require("../../chains/arbitrum.js"),require("../../chains/base.js"),require("../../chains/celo.js"),require("../../chains/mainnet.js"),require("../../chains/optimism.js"),require("../../chains/polygon.js");var n=/*#__PURE__*/i(r);exports.default=class{async sign(r){return await this._privyInternal.fetch(e.MoonpayOnRampSign,{body:r})}async getTransactionStatus({transactionId:r,useSandbox:e}){let{url:i,key:s}=a.MoonpayEnvironments[e?"sandbox":"prod"],o=await n.default(fetch,{retries:3,retryDelay:500})(`${i}/transactions/ext/${r}?apiKey=${s}`);if(!o.ok)throw new t.MoonpayApiError({error:`Failed to fetch transaction status for Transaction ${r}`,code:"failed_to_fetch_moonpay_transaction_status",response:o});let u=await o.json();return Array.isArray(u)?u.at(0):void 0}constructor(r){this._privyInternal=r}};
