"use strict";var e=require("./errors.js");require("./types.js"),exports.invokeWithMfa=async function(r,t,i,a,n,o=!1){let c=o,f=async f=>{if(c&&t&&t.length>0){f===(o?0:1)?n("configureMfa","onMfaRequired",t):a.current?.reject(new e.PrivyIframeError("missing_or_invalid_mfa","MFA verification failed, retry."));let c=await new Promise(((r,t)=>{i.current={resolve:r,reject:t},setTimeout((()=>{let r=new e.PrivyIframeError("mfa_timeout","Timed out waiting for MFA code");a.current?.reject(r),t(r)}),3e5)}));return await r(c)}return await r()},s=null;for(let e=0;e<4;e++)try{s=await f(e),a.current?.resolve(void 0);break}catch(e){if("missing_or_invalid_mfa"!==e.type)throw a.current?.resolve(void 0),e;c=!0}if(null===s){let r=new e.PrivyIframeError("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw a.current?.reject(r),r}return s};
