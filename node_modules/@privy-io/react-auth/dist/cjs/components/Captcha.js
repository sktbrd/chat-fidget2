"use strict";var e=require("react/jsx-runtime"),r=require("@marsidev/react-turnstile"),t=require("react"),s=require("../hooks/captcha-context.js");require("../hooks/index.js"),require("../errors.js"),require("ofetch"),require("../utils/index.js"),require("@ethersproject/providers"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js");exports.Captcha=i=>{let{enabled:o,siteKey:n,appId:c,setError:a,setToken:u,setExecuting:p,ref:d}=s.useCaptcha(),[,l]=t.useMemo((()=>n?.split("t:")||[]),[n]);if(t.useEffect((()=>d.current?.remove),[]),!o)return null;if(!l)throw Error("Unsupported captcha site key");/*#__PURE__*/return e.jsx("div",{className:"hidden h-0 w-0",children:/*#__PURE__*/e.jsx(r.Turnstile,{...i,ref:d,siteKey:l,options:{action:c,size:"invisible",...i.delayedExecution?{appearance:"execute",execution:"execute"}:{appearance:"always",execution:"render"}},onUnsupported:()=>{i.onUnsupported?.(),console.warn("Browser does not support Turnstile.")},onError:()=>{i.onError?.(),a("Captcha failed"),p(!1)},onSuccess:e=>{i.onSuccess?.(e),u(e),p(!1)},onExpire:()=>{i.onExpire?.();try{d.current?.reset(),a(void 0),u(void 0)}catch(e){a("expired_and_failed_reset")}}})})};
