"use strict";var e=require("react/jsx-runtime"),r=require("react"),t=require("react-device-detect"),i=require("styled-components");let n=Array(6).fill("");var a,o=((a=o||{})[a.RESET_AFTER_DELAY=0]="RESET_AFTER_DELAY",a[a.CLEAR_ON_NEXT_VALID_INPUT=1]="CLEAR_ON_NEXT_VALID_INPUT",a);function l(e){return/^[0-9]{1}$/.test(e)}function s(e){return 6===e.length&&e.every(l)}let c=/*#__PURE__*/i.styled.div.withConfig({displayName:"PinInputContainer",componentId:"sc-7a171f6-0"})(["display:flex;flex-direction:column;width:100%;gap:8px;@media (max-width:440px){margin-top:8px;margin-bottom:8px;}> div:nth-child(1){display:flex;justify-content:center;gap:0.5rem;width:100%;border-radius:var(--privy-border-radius-md);> input{border:1px solid var(--privy-color-foreground-4);background:var(--privy-color-background);border-radius:var(--privy-border-radius-md);padding:8px 10px;height:58px;width:46px;text-align:center;font-size:18px;}> input:disabled{background:var(--privy-color-background-2);}> input:focus{border:1px solid var(--privy-color-accent);}> input:invalid{border:1px solid var(--privy-color-error);}> input.success{border:1px solid var(--privy-color-success);}> input.fail{border:1px solid var(--privy-color-error);animation:shake 180ms;animation-iteration-count:2;}}@keyframes shake{0%{transform:translate(1px,0px);}33%{transform:translate(-1px,0px);}67%{transform:translate(-1px,0px);}100%{transform:translate(1px,0px);}}"]),u=/*#__PURE__*/i.styled.div.withConfig({displayName:"InputHelp",componentId:"sc-7a171f6-1"})(["line-height:20px;font-size:13px;display:flex;justify-content:flex-start;width:100%;color:",";"],(e=>e.$fail?"var(--privy-color-error)":"var(--privy-color-foreground-3)"));exports.NumericPinInput=({onChange:i,disabled:a,errorReasonOverride:o,success:d})=>{let[p,m]=r.useState(n),[x,v]=r.useState(null),[f,y]=r.useState(null),h=async e=>{e.preventDefault();let r=e.currentTarget.value.replace(/\s+/g,"");if(""===r)return;let t=p.reduce(((e,r)=>e+Number(l(r))),0),n=r.split(""),a=!n.every(l),o=n.length+t>6;if(a)return v("Passcode can only be numbers"),void y(1);if(o)return v("Passcode must be exactly 6 numbers"),void y(1);v(null),y(null);let c=Number(e.currentTarget.name?.charAt(4)),u=[...r||[""]].slice(0,6-c),d=[...p.slice(0,c),...u,...p.slice(c+u.length)];m(d);let x=Math.min(Math.max(c+u.length,0),5),f=document.querySelector(`input[name=pin-${x}]`);if(f?.focus(),s(d))try{await i(d.join(""));let e=document.querySelector(`input[name=pin-${x}]`);e?.blur()}catch(e){y(1),v(e.message)}else try{await i(null)}catch(e){y(1),v(e.message)}},g=d?"success":!(!o&&!x)?"fail":"";/*#__PURE__*/return e.jsx(e.Fragment,{children:/*#__PURE__*/e.jsxs(c,{children:[/*#__PURE__*/e.jsx("div",{children:p.map(((r,n)=>/*#__PURE__*/e.jsx("input",{name:`pin-${n}`,type:"text",value:p[n],onChange:h,onKeyUp:e=>{"Backspace"===e.key&&(e=>{1===f&&(v(null),y(null));let r=[...p.slice(0,e),"",...p.slice(e+1)];if(m(r),e>0){let r=document.querySelector(`input[name=pin-${e-1}]`);r?.focus()}s(r)?i(r.join("")):i(null)})(n)},inputMode:"numeric",autoFocus:0===n,pattern:"[0-9]",className:g,autoComplete:t.isMobile?"one-time-code":"off",disabled:a},n)))}),/*#__PURE__*/e.jsx("div",{children:/*#__PURE__*/e.jsx(u,{$fail:!!o||!!x,children:o||x})})]})})};
