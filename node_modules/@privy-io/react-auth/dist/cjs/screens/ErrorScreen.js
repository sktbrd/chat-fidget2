"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/ExclamationTriangleIcon"),i=require("@heroicons/react/24/outline/PhoneIcon"),o=require("styled-components"),t=require("../components/Button.js"),n=require("../components/CircleBorder.js"),a=require("../components/ModalHeader.js"),s=require("../components/layout/StackedContainer.js"),c=require("../embedded-wallets/errors.js"),l=require("../errors.js"),u=require("../hooks/captcha-context.js"),d=require("../hooks/modal-context.js"),h=require("../svg/lock-closed.js"),j=require("./index.js");function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../components/Loader.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../configuration/context.js"),require("react"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../constants.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../hooks/internal-context.js"),require("../hooks/index.js"),require("../embedded-wallets/types.js"),require("ofetch"),require("../utils/index.js"),require("@ethersproject/providers"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js"),require("../components/PrefetchedImage.js");var g=/*#__PURE__*/y(r),T=/*#__PURE__*/y(i);const q=({error:r,backFn:i,onClick:o})=>{let{reset:j}=u.useCaptcha(),{app:y}=d.usePrivyModal(),q=((r,i)=>{let o=/*#__PURE__*/e.jsx(g.default,{height:38,width:38,stroke:"var(--privy-color-error)"});if(r instanceof l.PrivyClientError)switch(r.privyErrorCode){case l.PrivyErrorCode.CLIENT_REQUEST_TIMEOUT:return{title:"Timed out",detail:r.message,ctaText:"Try again",icon:o};case l.PrivyErrorCode.INSUFFICIENT_BALANCE:return{title:"Insufficient balance",detail:r.message,ctaText:"Try again",icon:o};case l.PrivyErrorCode.TRANSACTION_FAILURE:return{title:"Transaction failure",detail:r.message,ctaText:"Try again",icon:o};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:o}}else{if(r instanceof c.PrivyIframeError&&"twilio_verification_failed"===r.type)return{title:"Something went wrong",detail:r.message,ctaText:"Try again",icon:/*#__PURE__*/e.jsx(T.default,{height:38,width:38,stroke:"var(--privy-color-error)"})};if(!(r instanceof l.PrivyError))return r instanceof l.PrivyApiError&&r.status&&[400,422].includes(r.status)?{title:"Something went wrong",detail:r.message,ctaText:"Try again",icon:o}:{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:o};switch(r.privyErrorCode){case l.PrivyErrorCode.INVALID_CAPTCHA:return{title:"Something went wrong",detail:"Please try again.",ctaText:"Try again",icon:o};case l.PrivyErrorCode.DISALLOWED_LOGIN_METHOD:return{title:"Not allowed",detail:r.message,ctaText:"Try another method",icon:o};case l.PrivyErrorCode.ALLOWLIST_REJECTED:return{title:i.errorTitle||"You don't have access to this app",detail:i.errorDetail||"Have you been invited?",ctaText:i.errorCtaText||"Try another account",icon:/*#__PURE__*/e.jsx(h.LockClosed,{style:{width:"38px",height:"38px",strokeWidth:"1",stroke:"var(--privy-color-accent)",fill:"var(--privy-color-accent)"}})};case l.PrivyErrorCode.CAPTCHA_FAILURE:return{title:"Something went wrong",detail:"You did not pass CAPTCHA. Please try again.",ctaText:"Try again",icon:/*#__PURE__*/e.jsx("span",{})};case l.PrivyErrorCode.CAPTCHA_TIMEOUT:return{title:"Something went wrong",detail:"Something went wrong! Please try again later.",ctaText:"Try again",icon:/*#__PURE__*/e.jsx("span",{})};case l.PrivyErrorCode.LINKED_TO_ANOTHER_USER:return{title:"Authentication failed",detail:"This account has already been linked to another user.",ctaText:"Try again",icon:o};case l.PrivyErrorCode.NOT_SUPPORTED:return{title:"This region is not supported",detail:"SMS authentication from this region is not available",ctaText:"Try another method",icon:o};case l.PrivyErrorCode.TOO_MANY_REQUESTS:return{title:"Request failed",detail:"Too many attempts.",ctaText:"Try again later",icon:o};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:o}}}})(r,y.allowlistConfig);/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(a.ModalHeader,{backFn:i}),/*#__PURE__*/e.jsxs(p,{children:[/*#__PURE__*/e.jsx(s.default,{children:/*#__PURE__*/e.jsxs("div",{children:[/*#__PURE__*/e.jsx(n.CircleBorder,{color:"var(--privy-color-error)"}),q.icon]})}),/*#__PURE__*/e.jsxs(C,{children:[/*#__PURE__*/e.jsx("h3",{children:q.title}),/*#__PURE__*/e.jsx("p",{children:q.detail})]}),/*#__PURE__*/e.jsx(t.PrimaryButton,{color:"var(--privy-color-error)",onClick:()=>{r instanceof l.PrivyError&&(r.privyErrorCode===l.PrivyErrorCode.INVALID_CAPTCHA&&j(),r.privyErrorCode===l.PrivyErrorCode.ALLOWLIST_REJECTED&&y.allowlistConfig.errorCtaLink)?window.location.href=y.allowlistConfig.errorCtaLink:o?.()},children:q.ctaText})]})]})};let p=/*#__PURE__*/o.styled.div.withConfig({displayName:"ConnectContainer",componentId:"sc-1d84a574-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;width:100%;padding-bottom:16px;"]),C=/*#__PURE__*/o.styled.div.withConfig({displayName:"GappedContainer",componentId:"sc-1d84a574-1"})(["display:flex;flex-direction:column;gap:8px;"]);exports.ErrorScreen=()=>{let{navigate:r,navigateBack:i,data:o,lastScreen:t,currentScreen:n}=d.usePrivyModal(),a=o?.errorModalData?.previousScreen||(t===n?void 0:t);/*#__PURE__*/return e.jsx(q,{error:o?.errorModalData?.error||Error(),backFn:()=>a?r(a,!1):i(),onClick:()=>r(a||j.ModalScreen.LANDING,!1)})},exports.ErrorScreenView=q;
