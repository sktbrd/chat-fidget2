"use strict";var e=require("react/jsx-runtime"),r=require("react"),o=require("styled-components"),n=require("../components/ModalFooter.js"),i=require("../components/ModalHeader.js"),t=require("../components/ui/banners/WarningBanner.js"),s=require("../components/ui/typography/Subtitle.js"),a=require("../components/ui/typography/Title.js"),c=require("../components/ui/wallet/WalletInfoCard.js"),l=require("../configuration/context.js"),u=require("../hooks/internal-context.js"),d=require("../hooks/modal-context.js"),p=require("../hooks/privy-context.js"),h=require("../utils/index.js");require("../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../constants.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../hooks/index.js"),require("@heroicons/react/24/outline/ExclamationTriangleIcon"),require("../components/ui/chips/Chip.js"),require("../components/ui/animation/LoadingSkeleton.js"),require("../components/ui/layout/Column.js"),require("../components/ui/typography/ErrorMessage.js"),require("../components/ui/typography/LabelXs.js"),require("../components/ui/wallet/Address.js"),require("@heroicons/react/24/outline/CheckIcon"),require("@heroicons/react/24/outline/Square2StackIcon"),require("@ethersproject/providers"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js"),require("../errors.js"),require("ofetch"),require("../components/ui/wallet/shared.js"),require("../components/PrefetchedImage.js"),require("./index.js");function j(o){let[n,i]=r.useState(o.dimensions.width),[t,s]=r.useState(void 0),a=r.useRef(null);r.useEffect((()=>{if(a.current&&void 0===n){let{width:e}=a.current.getBoundingClientRect();i(e)}let e=getComputedStyle(document.documentElement);s({background:e.getPropertyValue("--privy-color-background"),background2:e.getPropertyValue("--privy-color-background-2"),foreground3:e.getPropertyValue("--privy-color-foreground-3"),foregroundAccent:e.getPropertyValue("--privy-color-foreground-accent"),accent:e.getPropertyValue("--privy-color-accent"),accentDark:e.getPropertyValue("--privy-color-accent-dark"),success:e.getPropertyValue("--privy-color-success")})}),[]);let c="ethereum"===o.walletToExport.chainType&&!o.walletToExport.imported;/*#__PURE__*/return e.jsx("div",{ref:a,children:n&&
/*#__PURE__*/e.jsxs(q,{children:[/*#__PURE__*/e.jsx("iframe",{style:{position:"absolute",zIndex:1},width:n,height:o.dimensions.height,allow:"clipboard-write self *",src:h.constructURL(o.origin,`/apps/${o.appId}/embedded-wallets/export`,{client_id:o.appClientId,primaryAddress:o.primaryWallet.address,address:o.walletToExport.address,walletIndex:o.walletToExport.walletIndex,width:`${n}px`,caid:o.clientAnalyticsId,phrase_export:c,...t},{token:o.accessToken})}),/*#__PURE__*/e.jsx(g,{children:"Loading..."}),c&&/*#__PURE__*/e.jsx(g,{children:"Loading..."})]})})}let y=/*#__PURE__*/o.styled.div.withConfig({displayName:"EmbeddedWalletScreenContainer",componentId:"sc-eaab13a9-0"})(["display:flex;flex-direction:column;gap:1.25rem;text-align:left;"]),q=/*#__PURE__*/o.styled.div.withConfig({displayName:"ButtonContainer",componentId:"sc-eaab13a9-1"})(["overflow:visible;position:relative;overflow:none;height:44px;display:flex;gap:12px;"]),g=/*#__PURE__*/o.styled.div.withConfig({displayName:"LoadingButton",componentId:"sc-eaab13a9-2"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:16px;font-weight:500;border-radius:var(--privy-border-radius-md);background-color:var(--privy-color-background-2);color:var(--privy-color-foreground-3);"]);exports.EmbeddedWalletKeyExportScreen=()=>{let[o,h]=r.useState(null),{authenticated:q,user:g,getAccessToken:m}=p.usePrivyContext(),{closePrivyModal:f,createAnalyticsEvent:x,clientAnalyticsId:v}=u.usePrivyInternal(),b=l.useAppConfig(),{data:w,onUserCloseViaDialogOrKeybindRef:k}=d.usePrivyModal(),{onFailure:I,onSuccess:C,origin:S,appId:E,appClientId:A,walletToExport:T,primaryWallet:P}=w.keyExport,L=e=>{f({shouldCallAuthOnSuccess:!1}),I("string"==typeof e?Error(e):e)},W=()=>{f({shouldCallAuthOnSuccess:!1}),C(),x({eventName:"embedded_wallet_key_export_completed",payload:{walletAddress:T.address}})};return r.useEffect((()=>{if(!q||!T)return L("User must be authenticated before exporting their wallet");m().then(h,L)}),[q,g]),k.current=W,/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(i.ModalHeader,{onClose:W}),/*#__PURE__*/e.jsxs(y,{children:[/*#__PURE__*/e.jsx(a.Title,{children:"Transfer wallet"}),/*#__PURE__*/e.jsxs(s.Subtitle,{children:["Either copy your private key or seed phrase to transfer your wallet."," ",/*#__PURE__*/e.jsx("a",{href:"https://privy-io.notion.site/Transferring-your-account-9dab9e16c6034a7ab1ff7fa479b02828",target:"blank",rel:"noopener noreferrer",children:"Learn more"})]}),/*#__PURE__*/e.jsx(t.WarningBanner,{theme:b.appearance.palette.colorScheme,children:"Never share your private key or seed phrase with anyone."}),/*#__PURE__*/e.jsx(c.WalletInfoCard,{isLoading:!1,isPulsing:!1,title:"Your wallet",address:T.address,showIcon:!0}),/*#__PURE__*/e.jsx("div",{style:{width:"100%"},children:o&&/*#__PURE__*/e.jsx(j,{origin:S,appId:E,appClientId:A,accessToken:o,clientAnalyticsId:v,walletToExport:T,primaryWallet:P,dimensions:{height:"44px"}})})]}),/*#__PURE__*/e.jsx(n.BlobbyFooter,{})]})};
