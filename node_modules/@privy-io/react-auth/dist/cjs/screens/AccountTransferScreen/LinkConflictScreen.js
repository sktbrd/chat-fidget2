"use strict";var e=require("react/jsx-runtime"),r=require("../index.js"),n=require("@heroicons/react/24/outline/ExclamationTriangleIcon"),o=require("@heroicons/react/24/outline/WalletIcon"),s=require("react"),c=require("../../components/Button.js"),t=require("../../components/CircleBorder.js"),i=require("../../components/ModalFooter.js"),a=require("../../components/ModalHeader.js"),u=require("../../components/layout/StackedContainer.js"),l=require("../../components/ui/wallet/Address.js"),d=require("../../hooks/internal-context.js"),h=require("../../hooks/modal-context.js"),j=require("../../lib/capitalizeFirstLetter.js"),f=require("./AccountTransferButton.js"),q=require("./EmbeddedWalletInfoView.js"),p=require("./styled.js");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("styled-components"),require("../../components/Loader.js"),require("../../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../configuration/context.js"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/index.js"),require("@heroicons/react/24/outline/CheckIcon"),require("@heroicons/react/24/outline/Square2StackIcon"),require("../../utils/index.js"),require("@ethersproject/providers"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../errors.js"),require("ofetch"),require("../../components/PrefetchedImage.js"),require("@heroicons/react/24/outline/ExclamationCircleIcon");var x=/*#__PURE__*/m(n),T=/*#__PURE__*/m(o);const y=({onClose:r,onContinue:n,onInfo:o,onTransfer:s,transferSuccess:l,isTransferring:d,data:h})=>{if(!h?.accountTransfer?.linkMethod||!h?.accountTransfer?.displayName)return;let q={method:h?.accountTransfer?.linkMethod,handle:h?.accountTransfer?.displayName,disclosedAccount:h?.accountTransfer?.embeddedWalletAddress?{type:"wallet",handle:h?.accountTransfer?.embeddedWalletAddress}:void 0};/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(a.ModalHeader,{closeable:!0}),/*#__PURE__*/e.jsxs(p.ConnectContainer,{children:[/*#__PURE__*/e.jsx(u.default,{children:/*#__PURE__*/e.jsxs("div",{children:[/*#__PURE__*/e.jsx(t.CircleBorder,{color:"var(--privy-color-error)"}),/*#__PURE__*/e.jsx(x.default,{height:38,width:38,stroke:"var(--privy-color-error)"})]})}),/*#__PURE__*/e.jsxs(p.GappedContainer,{children:[/*#__PURE__*/e.jsxs("h3",{children:[function(e){switch(e){case"sms":return"Phone number";case"email":return"Email address";case"siwe":return"Wallet address";case"linkedin":return"LinkedIn profile";case"google":case"apple":case"discord":case"github":case"instagram":case"spotify":case"tiktok":case"twitter":case"telegram":case"farcaster":return`${j.default(e.replace("_oauth",""))} profile`;default:return e}}(q.method)," is associated with another account"]}),/*#__PURE__*/e.jsxs("p",{children:["Do you want to transfer",/*#__PURE__*/e.jsx("b",{children:q.handle?` ${q.handle}`:""})," to this account instead? This will delete your other account."]}),/*#__PURE__*/e.jsx(g,{onClick:o,disclosedAccount:q.disclosedAccount})]}),/*#__PURE__*/e.jsxs(p.GappedContainer,{style:{gap:12,marginTop:12},children:[h?.accountTransfer?.embeddedWalletAddress?/*#__PURE__*/e.jsx(c.PrimaryButton,{onClick:n,children:"Continue"}):/*#__PURE__*/e.jsx(f.AccountTransferButton,{onTransfer:s,transferSuccess:l,isTransferring:d}),/*#__PURE__*/e.jsx(c.SecondaryButton,{onClick:r,children:"No thanks"})]})]}),/*#__PURE__*/e.jsx(i.BlobbyFooter,{})]})};function g({disclosedAccount:r,onClick:n}){return r?/*#__PURE__*/e.jsxs(p.DisclosedAccountContainer,{onClick:n,children:[/*#__PURE__*/e.jsx(T.default,{color:"var(--privy-color-foreground-1)",strokeWidth:2,height:"28px",width:"28px"}),/*#__PURE__*/e.jsx(l.Address,{address:r.handle,showCopyIcon:!1}),/*#__PURE__*/e.jsx(p.StyledExclamationCircleIcon,{iconSize:15})]}):null}exports.LinkConflictScreen=()=>{let{initiateAccountTransfer:n,closePrivyModal:o}=d.usePrivyInternal(),{data:c,navigate:t,lastScreen:i,setModalData:a}=h.usePrivyModal(),[u,l]=s.useState(void 0),[j,f]=s.useState(!1),[p,m]=s.useState(!1),x=async()=>{try{if(!c?.accountTransfer?.nonce||!c?.accountTransfer?.account)throw Error("missing account transfer inputs");m(!0),await n({nonce:c?.accountTransfer?.nonce,account:c?.accountTransfer?.account,accountType:c?.accountTransfer?.linkMethod,externalWalletMetadata:c?.accountTransfer?.externalWalletMetadata,telegramAuthResult:c?.accountTransfer?.telegramAuthResult,farcasterEmbeddedAddress:c?.accountTransfer?.farcasterEmbeddedAddress,oAuthUserInfo:c?.accountTransfer?.oAuthUserInfo}),f(!0),m(!1),setTimeout(o,1e3)}catch(e){a({errorModalData:{error:e,previousScreen:i||r.ModalScreen.LINK_CONFLICT_SCREEN}}),t(r.ModalScreen.ERROR_SCREEN,!0)}};return u?/*#__PURE__*/e.jsx(q.EmbeddedWalletInfoView,{address:u,onClose:o,onRetry:()=>l(void 0),onTransfer:x,isTransferring:p,transferSuccess:j}):/*#__PURE__*/e.jsx(y,{onClose:o,onInfo:()=>l(c?.accountTransfer?.embeddedWalletAddress),onContinue:()=>l(c?.accountTransfer?.embeddedWalletAddress),onTransfer:x,isTransferring:p,transferSuccess:j,data:c})},exports.LinkConflictScreenView=y;
