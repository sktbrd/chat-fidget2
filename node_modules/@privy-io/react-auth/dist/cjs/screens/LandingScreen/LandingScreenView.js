"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/EnvelopeIcon"),i=require("@heroicons/react/24/outline/PhoneIcon"),t=require("@heroicons/react/24/outline/UserCircleIcon"),s=require("react"),o=require("styled-components"),n=require("@privy-io/js-sdk-core"),a=require("../../components/ModalFooter.js"),l=require("../../components/ModalHeader.js"),c=require("../../configuration/context.js"),u=require("../../hooks/internal-context.js"),p=require("../../hooks/modal-context.js"),j=require("../../lib/toDisplayFromAccountType.js"),h=require("../../recent-login/context.js"),d=require("../../svg/email-or-phone.js"),g=require("./AppLogoHeader.js"),q=require("./EmailButton.js"),m=require("./EmptyWalletView.js"),y=require("./FarcasterButton.js"),f=require("./PasskeyLink.js"),w=require("./SmsButton.js"),v=require("./SocialButton.js"),b=require("./TelegramButton.js"),x=require("./WalletButtonList.js"),k=require("./WalletOverflowButton.js"),C=require("./Web2OverflowButton.js"),B=require("./styles.js");function T(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/index.js"),require("../../components/PrefetchedImage.js"),require("../index.js"),require("../../hooks/events-context.js"),require("../../storage.js"),require("../../components/AppLogo.js"),require("../../components/ConnectEmailForm.js"),require("../../errors.js"),require("ofetch"),require("../../hooks/captcha-context.js"),require("../../utils/index.js"),require("@ethersproject/providers"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../hooks/privy-context.js"),require("../../components/Button.js"),require("../../components/Loader.js"),require("../../components/ui/chips/Chip.js"),require("../../components/ui/animation/LoadingSkeleton.js"),require("../../components/ui/forms/EmailInputForm.js"),require("../../components/ui/typography/ErrorMessage.js"),require("../../svg/farcaster.js"),require("../../components/ConnectPhoneForm.js"),require("../../components/PhoneCountryDropdown.js"),require("../../svg/apple.js"),require("../../svg/discord.js"),require("../../svg/github.js"),require("../../svg/google.js"),require("../../svg/instagram.js"),require("../../svg/linkedin.js"),require("../../svg/spotify.js"),require("../../svg/tiktok.js"),require("../../svg/twitter.js"),require("../../svg/telegram.js"),require("./WalletButton.js"),require("react-device-detect"),require("../../components/external-wallets/InjectedWalletIcon.js"),require("@heroicons/react/24/outline/WalletIcon"),require("../../lib/external-wallets/displayHelpers.js"),require("../../svg/brave-browser-icon.js"),require("../../svg/bybit.js"),require("../../svg/coinbase-wallet.js"),require("../../svg/cryptocom.js"),require("../../svg/metamask.js"),require("../../svg/phantom.js"),require("../../svg/rabby.js"),require("../../svg/rainbow.js"),require("../../svg/safe.js"),require("../../svg/uniswap.js"),require("../../svg/universal-profile.js"),require("../../svg/wallet-connect.js"),require("../../svg/zerion.js"),require("../../lib/isEmbeddedWebview.js"),require("@heroicons/react/24/outline/ChevronRightIcon");var A=/*#__PURE__*/T(r),M=/*#__PURE__*/T(i),S=/*#__PURE__*/T(t);let L=/*#__PURE__*/o.styled(g.AppLogoHeader).withConfig({displayName:"StyledAppLogoHeader",componentId:"sc-4938a02-0"})(["margin-bottom:16px;"]),E=({priority:e,email:r,sms:i,social:t})=>"web2-first"===e?"Other socials":r&&i&&t.length>0||r&&t.length>0?"Log in with email or socials":i&&t.length>0?"Log in with sms or socials":r&&i?"Continue with email or sms":r?"Continue with email":i?"Continue with sms":"Log in with a social account",W=({priority:r,email:i,sms:t,social:s})=>"web2-first"===r||s.length>0?/*#__PURE__*/e.jsx(S.default,{}):i&&t?/*#__PURE__*/e.jsx(d.EmailOrPhone,{}):i?/*#__PURE__*/e.jsx(A.default,{}):t?/*#__PURE__*/e.jsx(M.default,{}):null,I=({priority:e})=>"web2-first"===e?"Continue with a wallet":"Other wallets",F=({mostRecentlyUsedAccountType:e,smsAvailable:r,emailAvailable:i,prefilledType:t})=>i&&("email"===e&&"phone"!==t||"email"===t)||!r||"phone"!==e&&"phone"!==t?"email":"sms";exports.LandingScreenView=({connectOnly:r})=>{let{closePrivyModal:i,connectors:t}=u.usePrivyInternal(),{data:o,onUserCloseViaDialogOrKeybindRef:d}=p.usePrivyModal(),g=c.useAppConfig(),{accountType:T,walletClientType:A,chainType:M}=h.useRecentlyUsedLogin(),S=T?j.toDisplayFromAccountType(T):null,O=o?.login,{email:P,sms:H,google:V,twitter:R,discord:U,github:D,spotify:z,instagram:G,tiktok:K,linkedin:N,apple:Q,wallet:X,farcaster:J,telegram:Y}=s.useMemo((()=>O?.loginMethods?n.toObjectKeys(O.loginMethods,!0):null),[O])??g.loginMethods,{passkey:Z}=g.loginMethods,$=[P&&"email",H&&"sms",V&&"google",R&&"twitter",U&&"discord",D&&"github",z&&"spotify",G&&"instagram",K&&"tiktok",N&&"linkedin",Q&&"apple",J&&"farcaster",Y&&"telegram"].filter((e=>!!e)),_=$.length>0,ee=s.useMemo((()=>X&&!_?"web3-first":X&&g?.appearance.loginGroupPriority||"web2-first"),[X,_,g?.appearance.loginGroupPriority]),re=g?.appearance.hideDirectWeb2Inputs,[ie,te]=s.useState("default"),[se,oe]=s.useState(F({mostRecentlyUsedAccountType:T,smsAvailable:H,emailAvailable:P,prefilledType:O?.prefill?.type}));s.useEffect((()=>{oe(F({mostRecentlyUsedAccountType:T,smsAvailable:H,emailAvailable:P,prefilledType:O?.prefill?.type}))}),[P,H,T]);let ne=()=>{i({shouldCallAuthOnSuccess:!0}),setTimeout((()=>{te("default")}),150)};d.current=ne;let ae=[];A&&X?ae.push(A):S?.loginMethod&&$.includes(S.loginMethod)&&ae.push(S.loginMethod);let le=i=>"email"===i?/*#__PURE__*/e.jsx(q.EmailButton,{isEditable:"email"===se,setIsEditable:()=>{oe("email")},defaultValue:"email"===O?.prefill?.type?O.prefill.value:void 0},i):"sms"===i?/*#__PURE__*/e.jsx(w.SmsButton,{isEditable:"sms"===se,setIsEditable:()=>{oe("sms")},defaultValue:"phone"===O?.prefill?.type?O.prefill.value:void 0},i):"apple"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"apple"},i):"discord"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"discord"},i):"farcaster"===i?/*#__PURE__*/e.jsx(y.FarcasterButton,{},i):"github"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"github"},i):"google"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"google"},i):"linkedin"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"linkedin"},i):"tiktok"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"tiktok"},i):"spotify"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"spotify"},i):"instagram"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"instagram"},i):"twitter"===i?/*#__PURE__*/e.jsx(v.SocialButton,{provider:"twitter"},i):"telegram"===i?/*#__PURE__*/e.jsx(b.TelegramButton,{},i):x.toWalletButtons({walletList:g.appearance.walletList,walletChainType:g.appearance.walletChainType,connectors:t,connectOnly:r,ignore:[],walletConnectEnabled:g.externalWallets.walletConnect.enabled,forceWallet:{wallet:i,chainType:M??"ethereum"}}),ce=x.toWalletButtons({walletList:g.appearance.walletList.filter((e=>e!==A)),walletChainType:g.appearance.walletChainType,connectors:t,connectOnly:r,ignore:[...g.appearance.walletList,A],walletConnectEnabled:g.externalWallets.walletConnect.enabled}),ue=$.filter((e=>e!==S?.loginMethod)).flatMap(le),pe=ae.flatMap(le);"web3-first"===ee&&"default"===ie?ce.unshift(...pe):"web2-first"===ee&&ue.unshift(...pe);let je=$.filter((e=>"email"!==e&&"sms"!==e)),he=E({priority:ee,email:P,sms:H,social:je}),de=W({priority:ee,email:P,sms:H,social:je}),ge=/*#__PURE__*/e.jsx(k.WalletOverflowButton,{text:I({priority:ee}),onClick:()=>te("web3-overflow")}),qe=/*#__PURE__*/e.jsx(C.Web2OverflowButton,{text:he,icon:de,onClick:()=>te("web2-overflow")}),me=re?0:1,ye=X&&ce.length>0,fe=0===ue.length&&X&&0===ce.length,we=5-(ye?1:0),ve=ce.length>0?ce:/*#__PURE__*/e.jsx(m.EmptyWalletView,{chainType:g.appearance.walletChainType,withPadding:!0});/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(l.ModalHeader,{title:g.appearance.landingHeader,onClose:ne,backFn:"default"===ie?void 0:()=>{te("default")}}),"default"===ie&&/*#__PURE__*/e.jsx(L,{}),"default"===ie&&("string"==typeof g.appearance.loginMessage?/*#__PURE__*/e.jsx(B.Subtitle,{children:g.appearance.loginMessage}):g.appearance.loginMessage),/*#__PURE__*/e.jsx(B.AlignBottom,{style:{overflow:"hidden",padding:2},children:/*#__PURE__*/e.jsxs(B.LoginMethodContainer,{children:["default"===ie&&"web2-first"===ee&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[ue.length>we?ue.slice(0,we-1):ue,ue.length>we&&qe,ye&&ge,fe&&/*#__PURE__*/e.jsx(m.EmptyWalletView,{chainType:g.appearance.walletChainType})]}),"default"===ie&&"web3-first"===ee&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[X&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[ce.length>we?ce.slice(0,we-1):ce,ce.length>we&&ge]}),ue.length>me&&qe,ue.length===me&&ue[0],fe&&/*#__PURE__*/e.jsx(m.EmptyWalletView,{chainType:g.appearance.walletChainType})]}),"web2-overflow"===ie&&/*#__PURE__*/e.jsx(e.Fragment,{children:"web3-first"===ee?ue:ue.slice(3)}),"web3-overflow"===ie?ve:[],Z&&"default"===ie&&/*#__PURE__*/e.jsx(f.PasskeyLink,{})]})}),g&&/*#__PURE__*/e.jsx(a.TermsAndConditions,{app:g}),/*#__PURE__*/e.jsx(a.BlobbyFooter,{})]})};
