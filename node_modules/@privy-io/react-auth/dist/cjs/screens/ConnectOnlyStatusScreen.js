"use strict";var e=require("react/jsx-runtime"),r=require("react"),n=require("react-device-detect"),o=require("styled-components"),s=require("../components/Button.js"),i=require("../components/Layouts.js"),t=require("../components/ModalFooter.js"),c=require("../components/ModalHeader.js"),a=require("../connectors/errors.js"),l=require("../constants.js"),u=require("../hooks/internal-context.js"),j=require("../hooks/modal-context.js"),q=require("../lib/external-wallets/displayHelpers.js"),d=require("../svg/browser-extension-wallet-icon.js"),h=require("./ConnectionStatusScreen.js");require("../components/Loader.js"),require("../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../configuration/context.js"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../hooks/index.js"),require("@ethersproject/logger"),require("@privy-io/js-sdk-core"),require("../errors.js"),require("ofetch"),require("../components/PrefetchedImage.js"),require("./index.js"),require("../svg/brave-browser-icon.js"),require("../svg/bybit.js"),require("../svg/coinbase-wallet.js"),require("../svg/cryptocom.js"),require("../svg/metamask.js"),require("../svg/phantom.js"),require("../svg/rabby.js"),require("../svg/rainbow.js"),require("../svg/safe.js"),require("../svg/uniswap.js"),require("../svg/universal-profile.js"),require("../svg/wallet-connect.js"),require("../svg/zerion.js"),require("../auth-flows/siwe.js"),require("../effect.js"),require("../lib/siwe.js"),require("../auth-flows/siws.js"),require("../lib/siws.js"),require("../client/user.js"),require("@ethersproject/address"),require("../connectors/is-wallet-installed.js"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/userAlreadyHasConnectedCoinbaseWallet.js"),require("viem"),require("../connectors/walletconnect-v2.js"),require("@walletconnect/ethereum-provider"),require("../utils/index.js"),require("@ethersproject/providers"),require("../connectors/ethereum/index.js"),require("../storage.js"),require("../connectors/areWalletArraysEqual.js"),require("../connectors/isBaseConnectedEthereumWallet.js"),require("../connectors/base.js"),require("eventemitter3"),require("../connectors/getRpcTimeout.js"),require("../connectors/privyProxyProvider.js"),require("../connectors/walletconnect-registry.js"),require("../hook-utils/useInterval.js"),require("../hooks/captcha-context.js"),require("../hooks/privy-context.js"),require("../lib/useHasTabbedAway.js");let p=/*#__PURE__*/o.styled.div.withConfig({displayName:"ConnectContainer",componentId:"sc-1346f57-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;width:100%;"]);exports.ConnectOnlyStatusScreen=()=>{let o,{navigateBack:g,navigate:w,lastScreen:m,currentScreen:y,data:v,setModalData:f}=j.usePrivyModal(),{walletConnectionStatus:b,closePrivyModal:x}=u.usePrivyInternal(),[C,S]=r.useState(void 0),[k,E]=r.useState(0),T="connected"===b?.status,_="switching_to_supported_chain"===b?.status;r.useEffect((()=>{if(T){let e;if(v?.externalConnectWallet?.onCompleteNavigateTo){let r=v.externalConnectWallet.onCompleteNavigateTo,n=b.connectedWallet?.address;e=setTimeout((()=>{v.funding&&f({...v,funding:{...v.funding,connectedWalletAddress:n}}),w(r({walletChainType:b.connector?.chainType}))}),l.DEFAULT_SUCCESS_SCREEN_DURATION_MS)}else e=setTimeout(x,l.DEFAULT_SUCCESS_SCREEN_DURATION_MS);return()=>clearTimeout(e)}}),[T]);r.useEffect((()=>{var e;b?.connectError&&(e=b?.connectError,S(h.getErrorDetails(e)))}),[b]);let A=b?.connector?.connectorType||"injected",M=b?.connector?.walletClientType||"unknown",I=q.WALLET_UI_MAP[M]?.displayName||b?.connector?.walletBranding.name||"Browser Extension",L=q.WALLET_UI_MAP[M]?.logo||b?.connector?.walletBranding.icon||(r=>/*#__PURE__*/e.jsx(d.BrowserExtensionWallet,{...r})),R="Browser Extension"===I?I.toLowerCase():I;o=T?`Successfully connected with ${R}`:C?C.message:_?"Switching networks":`Waiting for ${R}`;let U="Don’t see your wallet? Check your other browser windows.";return T?U="You’re good to go!":k>=2&&C?U="Unable to connect wallet":C?U=C.detail:_?U="Switch your wallet to the requested network.":"metamask"===M&&n.isMobile?U="Click to continue to open and connect MetaMask.":"metamask"===M?U="For the best experience, connect only one wallet at a time.":"wallet_connect_v2"===A?U="Open your mobile wallet app to continue":"coinbase_wallet"===A&&(U="Open the Coinbase app on your phone to continue."),/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(c.ModalHeader,{backFn:y===m?void 0:g}),/*#__PURE__*/e.jsxs(p,{children:[/*#__PURE__*/e.jsx(h.WalletLoading,{walletLogo:L,success:T,fail:!!C}),/*#__PURE__*/e.jsxs(i.FixedGappedContainer,{children:[/*#__PURE__*/e.jsx("h3",{children:o}),/*#__PURE__*/e.jsx("p",{children:U})]}),C==a.ConnectorErrors.ERROR_USER_EXISTS?/*#__PURE__*/e.jsx(s.PrimaryButton,{onClick:g,children:"Use a different wallet"}):!T&&C?.retryable&&k<2?/*#__PURE__*/e.jsx(s.PrimaryButton,{onClick:()=>{E(k+1),S(void 0),b?.connectRetry()},disabled:!T&&(!C?.retryable||k>=2),children:"Retry"}):!T&&C&&k>=2?/*#__PURE__*/e.jsx(s.PrimaryButton,{onClick:g,children:"Use a different wallet"}):null]}),/*#__PURE__*/e.jsx(t.ModalFooter,{})]})};
