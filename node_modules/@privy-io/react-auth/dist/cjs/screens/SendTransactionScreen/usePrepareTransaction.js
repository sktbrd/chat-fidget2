"use strict";var e=require("@ethersproject/bignumber"),t=require("react"),a=require("@privy-io/js-sdk-core"),r=require("../../embedded-wallets/rpc/index.js"),s=require("../../hooks/internal-context.js"),i=require("../../hooks/privy-context.js");require("@ethersproject/providers"),require("../../constants.js"),require("../../hooks/index.js");exports.usePrepareTransaction=(n,u,l)=>{let[c,o]=t.useState(null),{getAccessToken:h}=i.usePrivyContext(),{walletProxy:d}=s.usePrivyInternal();return t.useEffect((()=>{c&&o(null),(async()=>{if(!await h()||!d||!u)return null;let t=[],s=await a.populateTransactionRequest(u.address,n,l).catch((e=>(t.push(e),n))),{totalGasEstimate:i,l1ExecutionFeeEstimate:c}=await a.calculateTotalGasEstimate(s,l).catch((e=>(t.push(e),{totalGasEstimate:null,l1ExecutionFeeEstimate:null}))),{balance:o,hasSufficientFunds:p}=await r.getAndCheckBalance(u.address,s,i??e.BigNumber.from(0),l).catch((e=>(t.push(e),{balance:null,hasSufficientFunds:!1})));return{tx:s,totalGasEstimate:i,l1ExecutionFeeEstimate:c,balance:o,hasFunds:p,errors:t}})().then(o)}),[n]),c};
