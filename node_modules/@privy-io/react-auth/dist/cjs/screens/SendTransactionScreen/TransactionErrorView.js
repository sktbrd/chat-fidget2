"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/ClipboardDocumentCheckIcon"),o=require("@heroicons/react/24/outline/ClipboardDocumentIcon"),n=require("@heroicons/react/24/outline/ExclamationCircleIcon"),i=require("react"),t=require("styled-components"),s=require("../../components/Button.js"),c=require("../../components/ModalFooter.js"),a=require("../../components/ModalHeader.js"),l=require("../../hooks/internal-context.js"),d=require("../../lib/solana/index.js"),h=require("./EthersTransactionError.js");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../../components/Loader.js"),require("../../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../configuration/context.js"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/index.js"),require("@ethersproject/logger");var u=/*#__PURE__*/p(r),g=/*#__PURE__*/p(o),f=/*#__PURE__*/p(n);let x=()=>/*#__PURE__*/e.jsxs(q,{children:[/*#__PURE__*/e.jsx(C,{}),/*#__PURE__*/e.jsx(w,{})]});let j=/*#__PURE__*/t.styled.div.withConfig({displayName:"TransactionErrorScreenContainer",componentId:"sc-6f98d2f2-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),m=/*#__PURE__*/t.styled.span.withConfig({displayName:"ErrorCode",componentId:"sc-6f98d2f2-1"})(["color:var(--privy-color-foreground);text-align:center;font-size:1.125rem;font-weight:500;line-height:1.25rem;text-align:center;margin:10px;"]),y=/*#__PURE__*/t.styled.span.withConfig({displayName:"Subtitle",componentId:"sc-6f98d2f2-2"})(["margin-top:4px;margin-bottom:10px;color:var(--privy-color-foreground-3);text-align:center;font-size:0.875rem;font-style:normal;font-weight:400;line-height:20px;letter-spacing:-0.008px;"]),q=/*#__PURE__*/t.styled.div.withConfig({displayName:"CircleContainer",componentId:"sc-6f98d2f2-3"})(["position:relative;width:60px;height:60px;margin:10px;display:flex;justify-content:center;align-items:center;"]),w=/*#__PURE__*/t.styled(f.default).withConfig({displayName:"StyledExclamationCircleIcon",componentId:"sc-6f98d2f2-4"})(["position:absolute;width:35px;height:35px;color:var(--privy-color-error);"]),C=/*#__PURE__*/t.styled.div.withConfig({displayName:"StyledRedCircle",componentId:"sc-6f98d2f2-5"})(["position:absolute;width:60px;height:60px;border-radius:50%;background-color:var(--privy-color-error);opacity:0.1;"]),b=/*#__PURE__*/t.styled(s.PrimaryButton).withConfig({displayName:"RetryButton",componentId:"sc-6f98d2f2-6"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]),v=/*#__PURE__*/t.styled.span.withConfig({displayName:"TextBoxTitle",componentId:"sc-6f98d2f2-7"})(["width:100%;text-align:left;font-size:0.825rem;color:var(--privy-color-foreground);padding:4px;"]),k=/*#__PURE__*/t.styled.div.withConfig({displayName:"TextBoxContainer",componentId:"sc-6f98d2f2-8"})(["width:100%;margin:5px;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),I=/*#__PURE__*/t.styled.text.withConfig({displayName:"HelperText",componentId:"sc-6f98d2f2-9"})(["position:relative;width:100%;padding:5px;font-size:0.8rem;color:var(--privy-color-foreground-3);text-align:left;word-wrap:break-word;"]),S=/*#__PURE__*/t.styled.span.withConfig({displayName:"TextBox",componentId:"sc-6f98d2f2-10"})(["position:relative;width:100%;background-color:var(--privy-color-background-2);padding:8px 12px;border-radius:10px;margin-top:5px;font-size:14px;color:var(--privy-color-foreground-3);text-align:left;word-wrap:break-word;",""],(e=>e.$clickable&&"cursor: pointer;\n  transition: background-color 0.3s;\n  padding-right: 45px;\n\n  &:hover {\n    background-color: var(--privy-color-foreground-4);\n  }")),N=/*#__PURE__*/t.styled(g.default).withConfig({displayName:"StyledClipboardIcon",componentId:"sc-6f98d2f2-11"})(["position:absolute;top:13px;right:13px;width:24px;height:24px;"]),T=/*#__PURE__*/t.styled(u.default).withConfig({displayName:"StyledClipboardCheckIcon",componentId:"sc-6f98d2f2-12"})(["position:absolute;top:13px;right:13px;width:24px;height:24px;"]),E=({clicked:r})=>r?/*#__PURE__*/e.jsx(T,{}):/*#__PURE__*/e.jsx(N,{});exports.TransactionErrorView=({transactionError:r,chainId:o,onClose:n,onRetry:t,network:s,connection:p})=>{let{chains:u}=l.usePrivyInternal(),[g,f]=i.useState(!1),{errorCode:q,transactionHash:w,errorMessage:C}=((e,r)=>{if("ethereum"===r)return{errorCode:e.code?e.code?.toString().charAt(0)+e.code?.toString().slice(1).replace("_"," ").toLowerCase():"Something went wrong.",transactionHash:h.getTransactionHashIfValid(e),errorMessage:h.getParsedTransactionErrorMessage(e)};let o=e.txSignature,n=e?.transactionMessage||"Something went wrong.";if(Array.isArray(e.logs)){let r=e.logs.find((e=>/insufficient (lamports|funds)/gi.test(e)));r&&(n=r)}return{transactionHash:o,errorMessage:n}})(r,s),N=(({chains:e,chainId:r,network:o,connection:n,transactionHash:i})=>"ethereum"===o?e.find((e=>e.id===r))?.blockExplorers?.default.url??"https://etherscan.io":d.getSolanaTransactionExplorerUrl(i||"",d.getSolanaNetworkFromRpcEndpoint(n?.rpcEndpoint||"")))({chains:u,chainId:o,network:s,connection:p,transactionHash:w});/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(a.ModalHeader,{onClose:n}),/*#__PURE__*/e.jsxs(j,{children:[/*#__PURE__*/e.jsx(x,{}),/*#__PURE__*/e.jsx(m,{children:q}),/*#__PURE__*/e.jsx(y,{children:"Please try again."}),/*#__PURE__*/e.jsxs(k,{children:[/*#__PURE__*/e.jsx(v,{children:"Error message"}),/*#__PURE__*/e.jsx(S,{$clickable:!1,children:C})]}),w&&/*#__PURE__*/e.jsxs(k,{children:[/*#__PURE__*/e.jsx(v,{children:"Transaction hash"}),/*#__PURE__*/e.jsxs(I,{children:["Copy this hash to view details about the transaction on a"," ",/*#__PURE__*/e.jsx("u",{children:/*#__PURE__*/e.jsx("a",{href:N,children:"block explorer"})}),"."]}),/*#__PURE__*/e.jsxs(S,{$clickable:!0,onClick:async()=>{await navigator.clipboard.writeText(w),f(!0)},children:[w,/*#__PURE__*/e.jsx(E,{clicked:g})]})]}),/*#__PURE__*/e.jsx(b,{onClick:()=>t({resetNonce:!!w}),children:"Retry transaction"})]}),/*#__PURE__*/e.jsx(c.ModalFooter,{})]})};
