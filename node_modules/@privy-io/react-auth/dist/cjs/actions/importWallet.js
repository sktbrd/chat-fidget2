"use strict";var e=require("../client/user.js"),r=require("../errors.js");require("@ethersproject/address"),require("ofetch");exports.importWallet=async({emitPrivyEvent:t,getAccessToken:i,initializeWalletProxy:o,refreshUser:a,user:n},{privateKey:l,chainType:s})=>{if(!n)throw t("linkAccount","onError",r.PrivyErrorCode.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new r.PrivyClientError("User must be authenticated before linking an account.");let[c,E]=await Promise.all([i(),o(15e3)]);if(!E||!c)throw t("linkAccount","onError",r.PrivyErrorCode.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new r.PrivyClientError("User must be authenticated before linking an account.");await E.importWallet({privateKey:l,accessToken:c,chainType:s});let u=await a(),y="solana"===s?e.getImportedPrivySolanaWallet(u):e.getImportedPrivyEthereumWallet(u);if(!y)throw t("createWallet","onError",r.PrivyErrorCode.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to import wallet");return t("createWallet","onSuccess",y),y};
