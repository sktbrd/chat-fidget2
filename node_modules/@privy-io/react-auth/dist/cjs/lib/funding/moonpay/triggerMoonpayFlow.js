"use strict";var e=require("../../../screens/index.js"),n=require("../../popup/triggerPopup.js"),r=require("./index.js");require("ofetch"),require("react"),require("../../../connectors/chains/arbitrum.js"),require("../../../connectors/chains/base.js"),require("../../../connectors/chains/celo.js"),require("../../../connectors/chains/mainnet.js"),require("../../../connectors/chains/optimism.js"),require("../../../connectors/chains/polygon.js"),require("../../../constants.js"),require("../../../hooks/internal-context.js"),require("../../../hooks/index.js"),require("../../../hooks/modal-context.js"),require("react/jsx-runtime"),require("../../../components/PrefetchedImage.js"),require("../../../configuration/context.js"),require("../../../config.js"),require("../../../configuration/defaultClientConfig.js"),require("../../../configuration/login-methods.js"),require("../../../configuration/wallets.js"),require("../../../connectors/chains/index.js"),require("../../../connectors/chains/arbitrumSepolia.js"),require("../../../connectors/chains/avalanche.js"),require("../../../connectors/chains/avalancheFuji.js"),require("../../../connectors/chains/baseSepolia.js"),require("../../../connectors/chains/berachainArtio.js"),require("../../../connectors/chains/celoAlfajores.js"),require("../../../connectors/chains/filecoin.js"),require("../../../connectors/chains/filecoinCalibration.js"),require("../../../connectors/chains/garnetHolesky.js"),require("../../../connectors/chains/holesky.js"),require("../../../connectors/chains/linea.js"),require("../../../connectors/chains/lineaTestnet.js"),require("../../../connectors/chains/lukso.js"),require("../../../connectors/chains/optimismSepolia.js"),require("../../../connectors/chains/polygonAmoy.js"),require("../../../connectors/chains/redstone.js"),require("../../../connectors/chains/sepolia.js"),require("../../../connectors/chains/zora.js"),require("../../../connectors/chains/zoraSepolia.js"),require("../../../connectors/chains/zoraTestnet.js"),require("../../../connectors/chains/utils.js"),require("../../solana/index.js"),require("../../../theme.js"),require("tinycolor2"),require("../../cybr53.js"),require("../analytics.js");exports.triggerMoonpayFlow=async(o,i,s,c,a,t,u,h)=>{let l=n.triggerPopup();if(!l)throw Error("Unable to initialize flow");let q="ethereum"===i.chainType?i.moonpayConfigOverride?.currencyCode??r.chainToMoonpayCurrency(i.chain.id,c):"SOL",{signedUrl:j,externalTransactionId:d}=await o.signMoonpayOnRampUrl({address:i.address,useSandbox:s.fundingMethodConfig.moonpay.useSandbox??!1,config:{uiConfig:{accentColor:s.appearance.palette.accent,theme:s.appearance.palette.colorScheme},...i.moonpayConfigOverride,paymentMethod:h??s.fundingMethodConfig.moonpay.paymentMethod,currencyCode:q,quoteCurrencyAmount:i.moonpayConfigOverride?.quoteCurrencyAmount??r.amountToMoonpayAmount(i.amount)}});o.createAnalyticsEvent({eventName:"sdk_fiat_on_ramp_started",payload:{provider:"moonpay",value:i.amount,chainType:i.chainType,chainId:"ethereum"===i.chainType?i.chain.id:i.cluster.name}}),l.location=j;let p={...u?.funding,showAlternateFundingMethod:!0};i.usingDefaultFundingMethod&&(p.usingDefaultFundingMethod=!1),a({moonpayStatus:{},funding:p}),t(e.ModalScreen.MOONPAY_STATUS_SCREEN),setTimeout((()=>{a({moonpayStatus:{externalTransactionId:d},funding:p})}),8e3)};
