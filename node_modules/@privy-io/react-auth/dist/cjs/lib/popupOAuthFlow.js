"use strict";exports.popupOAuthFlow=async function({url:t,popup:e,provider:a}){return e.location=t,new Promise(((t,a)=>{function o(){e?.close(),window.removeEventListener("message",n)}function n(e){e.data&&("PRIVY_OAUTH_RESPONSE"===e.data.type&&e.data.stateCode&&e.data.authorizationCode&&(t(e.data),o()),"https://cdn.apple-cloudkit.com"===e.origin&&e.data.ckSession&&(t({type:"PRIVY_OAUTH_RESPONSE",ckWebAuthToken:e.data.ckSession}),o()),"PRIVY_OAUTH_ERROR"===e.data.type&&(a(e.data.error),o()))}window.addEventListener("message",n)}))};
