"use strict";var e=require("zustand"),t=require("zustand/shallow"),s=require("zustand/traditional"),l=require("../../storage.js");const a=e.create((()=>({isModalOpen:!1,resolvers:null})));let r=s.createWithEqualityFn((()=>({})),t.shallow);const o=e=>`privy:${e}:active-wallet-connection`;exports.close=()=>{let e=a.getState().resolvers;e||console.warn("useActiveWalletStore: Called close while modal was not open"),a.setState({isModalOpen:!1}),e?.resolve({wallet:a.getState().wallet})},exports.open=async()=>{let e,t,s=new Promise(((s,l)=>{e=s,t=l}));return r.setState({}),a.setState({isModalOpen:!0,resolvers:{resolve:e,reject:t}}),await s},exports.setActiveWallet=({address:e,client:t,appId:s})=>{let r=`${t}:${e}`;s&&l.default.put(o(s),r),a.setState({wallet:r})},exports.toActiveWalletKey=o,exports.updateBalance=(e,t,s)=>{r.setState((l=>({...l,[e]:{...l[e],[t]:s}})))},exports.useActiveWalletStore=a,exports.useBalance=(e,t)=>r((s=>s[e]?.[t])),exports.useIsModalOpen=()=>a((e=>e.isModalOpen));
