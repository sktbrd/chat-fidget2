async function e({url:e,popup:t,provider:a}){return t.location=e,new Promise(((e,a)=>{function o(){t?.close(),window.removeEventListener("message",n)}function n(t){t.data&&("PRIVY_OAUTH_RESPONSE"===t.data.type&&t.data.stateCode&&t.data.authorizationCode&&(e(t.data),o()),"https://cdn.apple-cloudkit.com"===t.origin&&t.data.ckSession&&(e({type:"PRIVY_OAUTH_RESPONSE",ckWebAuthToken:t.data.ckSession}),o()),"PRIVY_OAUTH_ERROR"===t.data.type&&(a(t.data.error),o()))}window.addEventListener("message",n)}))}export{e as popupOAuthFlow};
