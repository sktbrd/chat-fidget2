import{useEffect as o,useMemo as t}from"react";import{useAppConfig as s}from"../../configuration/context.mjs";import{useWallets as n}from"../../hooks/useWallets.mjs";import i from"../../storage.mjs";import{useActiveWalletStore as r,toActiveWalletKey as e,open as m}from"./state.mjs";import{useSolanaWallets as c}from"../../hooks/useSolanaWallets.mjs";import"react/jsx-runtime";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"zustand";import"zustand/shallow";import"zustand/traditional";import"../../client/user.mjs";import"@ethersproject/address";import"../../errors.mjs";import"ofetch";import"../../hooks/internal-context.mjs";import"../../hooks/index.mjs";import"../../hooks/privy-context.mjs";const a=()=>{let a=s(),{wallets:l}=n(),{wallets:p}=c(),j=r((o=>o.wallet));o((()=>{if(!a.id)return;let o=i.get(e(a.id));r.setState({wallet:o})}),[a.id]);let h=t((()=>{if(!j)return;let[,o]=j.split(":");return l.find((t=>t.address===o))||p.find((t=>t.address===o))}),[j,l,p]),d=t((()=>h?"ethereum"===h.type?h.chainId:"solana":void 0),[h]);return{connect:async o=>{o?.reset&&(i.del(e(a.id)),r.setState({wallet:void 0}));let{wallet:t}=await m();if(!t)return{};let[,s]=t.split(":"),n=l.find((o=>o.address===s));if(n)return{wallet:n,network:n.chainId};let c=p.find((o=>o.address===s));return c?{wallet:c,network:"solana"}:{}},wallet:h,network:d}};export{a as useActiveWallet};
