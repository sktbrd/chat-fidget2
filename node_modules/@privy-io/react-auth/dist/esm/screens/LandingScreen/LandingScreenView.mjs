import{jsx as o,jsxs as e,Fragment as t}from"react/jsx-runtime";import i from"@heroicons/react/24/outline/EnvelopeIcon";import r from"@heroicons/react/24/outline/PhoneIcon";import s from"@heroicons/react/24/outline/UserCircleIcon";import{useMemo as n,useState as m,useEffect as a}from"react";import{styled as l}from"styled-components";import{toObjectKeys as p}from"@privy-io/js-sdk-core";import{TermsAndConditions as c,BlobbyFooter as h}from"../../components/ModalFooter.mjs";import{ModalHeader as d}from"../../components/ModalHeader.mjs";import{useAppConfig as g}from"../../configuration/context.mjs";import{usePrivyInternal as j}from"../../hooks/internal-context.mjs";import{usePrivyModal as f}from"../../hooks/modal-context.mjs";import{toDisplayFromAccountType as u}from"../../lib/toDisplayFromAccountType.mjs";import{useRecentlyUsedLogin as y}from"../../recent-login/context.mjs";import{EmailOrPhone as w}from"../../svg/email-or-phone.mjs";import{AppLogoHeader as v}from"./AppLogoHeader.mjs";import{EmailButton as b}from"./EmailButton.mjs";import{EmptyWalletView as k}from"./EmptyWalletView.mjs";import{FarcasterButton as C}from"./FarcasterButton.mjs";import{PasskeyLink as T}from"./PasskeyLink.mjs";import{SmsButton as x}from"./SmsButton.mjs";import{SocialButton as A}from"./SocialButton.mjs";import{TelegramButton as M}from"./TelegramButton.mjs";import{toWalletButtons as I}from"./WalletButtonList.mjs";import{WalletOverflowButton as L}from"./WalletOverflowButton.mjs";import{Web2OverflowButton as E}from"./Web2OverflowButton.mjs";import{Subtitle as W,AlignBottom as B,LoginMethodContainer as O}from"./styles.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../hooks/index.mjs";import"../../components/PrefetchedImage.mjs";import"../index.mjs";import"../../hooks/events-context.mjs";import"../../storage.mjs";import"../../components/AppLogo.mjs";import"../../components/ConnectEmailForm.mjs";import"../../errors.mjs";import"ofetch";import"../../hooks/captcha-context.mjs";import"../../utils/index.mjs";import"@ethersproject/providers";import"../../connectors/get-legacy-injected-providers.mjs";import"../../connectors/is-wallet-installed.mjs";import"../../hooks/privy-context.mjs";import"../../components/Button.mjs";import"../../components/Loader.mjs";import"../../components/ui/chips/Chip.mjs";import"../../components/ui/animation/LoadingSkeleton.mjs";import"../../components/ui/forms/EmailInputForm.mjs";import"../../components/ui/typography/ErrorMessage.mjs";import"../../svg/farcaster.mjs";import"../../components/ConnectPhoneForm.mjs";import"../../components/PhoneCountryDropdown.mjs";import"../../svg/apple.mjs";import"../../svg/discord.mjs";import"../../svg/github.mjs";import"../../svg/google.mjs";import"../../svg/instagram.mjs";import"../../svg/linkedin.mjs";import"../../svg/spotify.mjs";import"../../svg/tiktok.mjs";import"../../svg/twitter.mjs";import"../../svg/telegram.mjs";import"./WalletButton.mjs";import"react-device-detect";import"../../components/external-wallets/InjectedWalletIcon.mjs";import"@heroicons/react/24/outline/WalletIcon";import"../../lib/external-wallets/displayHelpers.mjs";import"../../svg/brave-browser-icon.mjs";import"../../svg/bybit.mjs";import"../../svg/coinbase-wallet.mjs";import"../../svg/cryptocom.mjs";import"../../svg/metamask.mjs";import"../../svg/phantom.mjs";import"../../svg/rabby.mjs";import"../../svg/rainbow.mjs";import"../../svg/safe.mjs";import"../../svg/uniswap.mjs";import"../../svg/universal-profile.mjs";import"../../svg/wallet-connect.mjs";import"../../svg/zerion.mjs";import"../../lib/isEmbeddedWebview.mjs";import"@heroicons/react/24/outline/ChevronRightIcon";const P=({connectOnly:i})=>{let{closePrivyModal:r,connectors:s}=j(),{data:l,onUserCloseViaDialogOrKeybindRef:w}=f(),v=g(),{accountType:P,walletClientType:z,chainType:D}=y(),V=P?u(P):null,G=l?.login,{email:K,sms:N,google:Q,twitter:X,discord:q,github:J,spotify:Y,instagram:Z,tiktok:$,linkedin:_,apple:oo,wallet:eo,farcaster:to,telegram:io}=n((()=>G?.loginMethods?p(G.loginMethods,!0):null),[G])??v.loginMethods,{passkey:ro}=v.loginMethods,so=[K&&"email",N&&"sms",Q&&"google",X&&"twitter",q&&"discord",J&&"github",Y&&"spotify",Z&&"instagram",$&&"tiktok",_&&"linkedin",oo&&"apple",to&&"farcaster",io&&"telegram"].filter((o=>!!o)),no=so.length>0,mo=n((()=>eo&&!no?"web3-first":eo&&v?.appearance.loginGroupPriority||"web2-first"),[eo,no,v?.appearance.loginGroupPriority]),ao=v?.appearance.hideDirectWeb2Inputs,[lo,po]=m("default"),[co,ho]=m(U({mostRecentlyUsedAccountType:P,smsAvailable:N,emailAvailable:K,prefilledType:G?.prefill?.type}));a((()=>{ho(U({mostRecentlyUsedAccountType:P,smsAvailable:N,emailAvailable:K,prefilledType:G?.prefill?.type}))}),[K,N,P]);let go=()=>{r({shouldCallAuthOnSuccess:!0}),setTimeout((()=>{po("default")}),150)};w.current=go;let jo=[];z&&eo?jo.push(z):V?.loginMethod&&so.includes(V.loginMethod)&&jo.push(V.loginMethod);let fo=e=>"email"===e?/*#__PURE__*/o(b,{isEditable:"email"===co,setIsEditable:()=>{ho("email")},defaultValue:"email"===G?.prefill?.type?G.prefill.value:void 0},e):"sms"===e?/*#__PURE__*/o(x,{isEditable:"sms"===co,setIsEditable:()=>{ho("sms")},defaultValue:"phone"===G?.prefill?.type?G.prefill.value:void 0},e):"apple"===e?/*#__PURE__*/o(A,{provider:"apple"},e):"discord"===e?/*#__PURE__*/o(A,{provider:"discord"},e):"farcaster"===e?/*#__PURE__*/o(C,{},e):"github"===e?/*#__PURE__*/o(A,{provider:"github"},e):"google"===e?/*#__PURE__*/o(A,{provider:"google"},e):"linkedin"===e?/*#__PURE__*/o(A,{provider:"linkedin"},e):"tiktok"===e?/*#__PURE__*/o(A,{provider:"tiktok"},e):"spotify"===e?/*#__PURE__*/o(A,{provider:"spotify"},e):"instagram"===e?/*#__PURE__*/o(A,{provider:"instagram"},e):"twitter"===e?/*#__PURE__*/o(A,{provider:"twitter"},e):"telegram"===e?/*#__PURE__*/o(M,{},e):I({walletList:v.appearance.walletList,walletChainType:v.appearance.walletChainType,connectors:s,connectOnly:i,ignore:[],walletConnectEnabled:v.externalWallets.walletConnect.enabled,forceWallet:{wallet:e,chainType:D??"ethereum"}}),uo=I({walletList:v.appearance.walletList.filter((o=>o!==z)),walletChainType:v.appearance.walletChainType,connectors:s,connectOnly:i,ignore:[...v.appearance.walletList,z],walletConnectEnabled:v.externalWallets.walletConnect.enabled}),yo=so.filter((o=>o!==V?.loginMethod)).flatMap(fo),wo=jo.flatMap(fo);"web3-first"===mo&&"default"===lo?uo.unshift(...wo):"web2-first"===mo&&yo.unshift(...wo);let vo=so.filter((o=>"email"!==o&&"sms"!==o)),bo=F({priority:mo,email:K,sms:N,social:vo}),ko=H({priority:mo,email:K,sms:N,social:vo}),Co=/*#__PURE__*/o(L,{text:R({priority:mo}),onClick:()=>po("web3-overflow")}),To=/*#__PURE__*/o(E,{text:bo,icon:ko,onClick:()=>po("web2-overflow")}),xo=ao?0:1,Ao=eo&&uo.length>0,Mo=0===yo.length&&eo&&0===uo.length,Io=5-(Ao?1:0),Lo=uo.length>0?uo:/*#__PURE__*/o(k,{chainType:v.appearance.walletChainType,withPadding:!0});/*#__PURE__*/return e(t,{children:[/*#__PURE__*/o(d,{title:v.appearance.landingHeader,onClose:go,backFn:"default"===lo?void 0:()=>{po("default")}}),"default"===lo&&/*#__PURE__*/o(S,{}),"default"===lo&&("string"==typeof v.appearance.loginMessage?/*#__PURE__*/o(W,{children:v.appearance.loginMessage}):v.appearance.loginMessage),/*#__PURE__*/o(B,{style:{overflow:"hidden",padding:2},children:/*#__PURE__*/e(O,{children:["default"===lo&&"web2-first"===mo&&/*#__PURE__*/e(t,{children:[yo.length>Io?yo.slice(0,Io-1):yo,yo.length>Io&&To,Ao&&Co,Mo&&/*#__PURE__*/o(k,{chainType:v.appearance.walletChainType})]}),"default"===lo&&"web3-first"===mo&&/*#__PURE__*/e(t,{children:[eo&&/*#__PURE__*/e(t,{children:[uo.length>Io?uo.slice(0,Io-1):uo,uo.length>Io&&Co]}),yo.length>xo&&To,yo.length===xo&&yo[0],Mo&&/*#__PURE__*/o(k,{chainType:v.appearance.walletChainType})]}),"web2-overflow"===lo&&/*#__PURE__*/o(t,{children:"web3-first"===mo?yo:yo.slice(3)}),"web3-overflow"===lo?Lo:[],ro&&"default"===lo&&/*#__PURE__*/o(T,{})]})}),v&&/*#__PURE__*/o(c,{app:v}),/*#__PURE__*/o(h,{})]})};let S=/*#__PURE__*/l(v).withConfig({displayName:"StyledAppLogoHeader",componentId:"sc-4938a02-0"})(["margin-bottom:16px;"]),F=({priority:o,email:e,sms:t,social:i})=>"web2-first"===o?"Other socials":e&&t&&i.length>0||e&&i.length>0?"Log in with email or socials":t&&i.length>0?"Log in with sms or socials":e&&t?"Continue with email or sms":e?"Continue with email":t?"Continue with sms":"Log in with a social account",H=({priority:e,email:t,sms:n,social:m})=>"web2-first"===e||m.length>0?/*#__PURE__*/o(s,{}):t&&n?/*#__PURE__*/o(w,{}):t?/*#__PURE__*/o(i,{}):n?/*#__PURE__*/o(r,{}):null,R=({priority:o})=>"web2-first"===o?"Continue with a wallet":"Other wallets",U=({mostRecentlyUsedAccountType:o,smsAvailable:e,emailAvailable:t,prefilledType:i})=>t&&("email"===o&&"phone"!==i||"email"===i)||!e||"phone"!==o&&"phone"!==i?"email":"sms";export{P as LandingScreenView};
