import{jsxs as o,Fragment as n,jsx as r}from"react/jsx-runtime";import i from"@heroicons/react/24/outline/ClipboardDocumentCheckIcon";import t from"@heroicons/react/24/outline/ClipboardDocumentIcon";import e from"@heroicons/react/24/outline/ExclamationCircleIcon";import{useState as c}from"react";import{styled as s}from"styled-components";import{PrimaryButton as a}from"../../components/Button.mjs";import{ModalFooter as m}from"../../components/ModalFooter.mjs";import{ModalHeader as p}from"../../components/ModalHeader.mjs";import{usePrivyInternal as l}from"../../hooks/internal-context.mjs";import{getSolanaTransactionExplorerUrl as d,getSolanaNetworkFromRpcEndpoint as h}from"../../lib/solana/index.mjs";import{getTransactionHashIfValid as f,getParsedTransactionErrorMessage as g}from"./EthersTransactionError.mjs";import"../../components/Loader.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../configuration/context.mjs";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../hooks/index.mjs";import"@ethersproject/logger";let x=()=>/*#__PURE__*/o(C,{children:[/*#__PURE__*/r(v,{}),/*#__PURE__*/r(b,{})]});const u=({transactionError:i,chainId:t,onClose:e,onRetry:s,network:a,connection:u})=>{let{chains:C}=l(),[b,v]=c(!1),{errorCode:E,transactionHash:z,errorMessage:H}=((o,n)=>{if("ethereum"===n)return{errorCode:o.code?o.code?.toString().charAt(0)+o.code?.toString().slice(1).replace("_"," ").toLowerCase():"Something went wrong.",transactionHash:f(o),errorMessage:g(o)};let r=o.txSignature,i=o?.transactionMessage||"Something went wrong.";if(Array.isArray(o.logs)){let n=o.logs.find((o=>/insufficient (lamports|funds)/gi.test(o)));n&&(i=n)}return{transactionHash:r,errorMessage:i}})(i,a),M=(({chains:o,chainId:n,network:r,connection:i,transactionHash:t})=>"ethereum"===r?o.find((o=>o.id===n))?.blockExplorers?.default.url??"https://etherscan.io":d(t||"",h(i?.rpcEndpoint||"")))({chains:C,chainId:t,network:a,connection:u,transactionHash:z});/*#__PURE__*/return o(n,{children:[/*#__PURE__*/r(p,{onClose:e}),/*#__PURE__*/o(j,{children:[/*#__PURE__*/r(x,{}),/*#__PURE__*/r(y,{children:E}),/*#__PURE__*/r(w,{children:"Please try again."}),/*#__PURE__*/o(S,{children:[/*#__PURE__*/r(I,{children:"Error message"}),/*#__PURE__*/r(T,{$clickable:!1,children:H})]}),z&&/*#__PURE__*/o(S,{children:[/*#__PURE__*/r(I,{children:"Transaction hash"}),/*#__PURE__*/o(N,{children:["Copy this hash to view details about the transaction on a"," ",/*#__PURE__*/r("u",{children:/*#__PURE__*/r("a",{href:M,children:"block explorer"})}),"."]}),/*#__PURE__*/o(T,{$clickable:!0,onClick:async()=>{await navigator.clipboard.writeText(z),v(!0)},children:[z,/*#__PURE__*/r(A,{clicked:b})]})]}),/*#__PURE__*/r(k,{onClick:()=>s({resetNonce:!!z}),children:"Retry transaction"})]}),/*#__PURE__*/r(m,{})]})};let j=/*#__PURE__*/s.div.withConfig({displayName:"TransactionErrorScreenContainer",componentId:"sc-6f98d2f2-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),y=/*#__PURE__*/s.span.withConfig({displayName:"ErrorCode",componentId:"sc-6f98d2f2-1"})(["color:var(--privy-color-foreground);text-align:center;font-size:1.125rem;font-weight:500;line-height:1.25rem;text-align:center;margin:10px;"]),w=/*#__PURE__*/s.span.withConfig({displayName:"Subtitle",componentId:"sc-6f98d2f2-2"})(["margin-top:4px;margin-bottom:10px;color:var(--privy-color-foreground-3);text-align:center;font-size:0.875rem;font-style:normal;font-weight:400;line-height:20px;letter-spacing:-0.008px;"]),C=/*#__PURE__*/s.div.withConfig({displayName:"CircleContainer",componentId:"sc-6f98d2f2-3"})(["position:relative;width:60px;height:60px;margin:10px;display:flex;justify-content:center;align-items:center;"]),b=/*#__PURE__*/s(e).withConfig({displayName:"StyledExclamationCircleIcon",componentId:"sc-6f98d2f2-4"})(["position:absolute;width:35px;height:35px;color:var(--privy-color-error);"]),v=/*#__PURE__*/s.div.withConfig({displayName:"StyledRedCircle",componentId:"sc-6f98d2f2-5"})(["position:absolute;width:60px;height:60px;border-radius:50%;background-color:var(--privy-color-error);opacity:0.1;"]),k=/*#__PURE__*/s(a).withConfig({displayName:"RetryButton",componentId:"sc-6f98d2f2-6"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]),I=/*#__PURE__*/s.span.withConfig({displayName:"TextBoxTitle",componentId:"sc-6f98d2f2-7"})(["width:100%;text-align:left;font-size:0.825rem;color:var(--privy-color-foreground);padding:4px;"]),S=/*#__PURE__*/s.div.withConfig({displayName:"TextBoxContainer",componentId:"sc-6f98d2f2-8"})(["width:100%;margin:5px;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),N=/*#__PURE__*/s.text.withConfig({displayName:"HelperText",componentId:"sc-6f98d2f2-9"})(["position:relative;width:100%;padding:5px;font-size:0.8rem;color:var(--privy-color-foreground-3);text-align:left;word-wrap:break-word;"]),T=/*#__PURE__*/s.span.withConfig({displayName:"TextBox",componentId:"sc-6f98d2f2-10"})(["position:relative;width:100%;background-color:var(--privy-color-background-2);padding:8px 12px;border-radius:10px;margin-top:5px;font-size:14px;color:var(--privy-color-foreground-3);text-align:left;word-wrap:break-word;",""],(o=>o.$clickable&&"cursor: pointer;\n  transition: background-color 0.3s;\n  padding-right: 45px;\n\n  &:hover {\n    background-color: var(--privy-color-foreground-4);\n  }")),E=/*#__PURE__*/s(t).withConfig({displayName:"StyledClipboardIcon",componentId:"sc-6f98d2f2-11"})(["position:absolute;top:13px;right:13px;width:24px;height:24px;"]),z=/*#__PURE__*/s(i).withConfig({displayName:"StyledClipboardCheckIcon",componentId:"sc-6f98d2f2-12"})(["position:absolute;top:13px;right:13px;width:24px;height:24px;"]),A=({clicked:o})=>/*#__PURE__*/r(o?z:E,{});export{u as TransactionErrorView};
