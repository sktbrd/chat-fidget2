import{useState as r,useMemo as e,useCallback as t,useEffect as o}from"react";import{createPublicClient as i,http as n}from"viem";import{getJsonRpcEndpointFromChain as a}from"../utils/index.mjs";import{usePrivyInternal as c}from"./internal-context.mjs";import"@ethersproject/providers";import"../connectors/get-legacy-injected-providers.mjs";import"../connectors/is-wallet-installed.mjs";import"../errors.mjs";import"ofetch";import"./index.mjs";function s({rpcConfig:s,appId:m,address:p,chain:l}){let{chains:d}=c(),[f,j]=r(0n),[h,u]=r(!1),g=e((()=>{let r=l||d[0];if(r)return i({chain:l,transport:n(a(r,s,m))})}),[l,s,m]),v=t((async()=>{if(!p||!g)return;u(!0);let r=await g.getBalance({address:p}).catch(console.error);return r?(j(r),u(!1),r):void 0}),[g,p,j]);return o((()=>{v().catch(console.error)}),[]),{balance:f,isLoading:h,reloadBalance:v}}export{s as useWalletBalance};
